# Подготовка

Для обмена сообщениями с GigaChat API нужен корневой сертификат Минцифры . Без него при попытке получить токен доступа с помощью запроса POST /api/v2/oauth или в процессе инициализации SDK, будет возвращаться ошибка валидации сертификата. Например:

[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: self-signed certificate in certificate chain

Вы можете установить сертификаты на уровне приложения или на уровне операционной системы.
## Установка сертификатов на уровне приложения

Для автоматической установки сертификатов выполните команду:

curl -k "https://gu-st.ru/content/lending/russian_trusted_root_ca_pem.crt" -w "\n" >> $(python -m certifi)

При выполнении команды сертификат скачивается и устанавливается автоматически. При переходе в новую виртуальную среду может понадобиться повторная установка сертификата.

Если вы используете библиотеки gigachat или langchain-gigcachat, вы можете указать путь к файлу сертификата в параметре ca_bundle_file при инициализации:

from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
   scope="GIGACHAT_API_PERS",
   model="GigaChat",
   ca_bundle_file="/путь/к/файлу/russian_trusted_root_ca_pem.crt"
)

Подробнее о параметрах инициализации объекта GigaChat — в разделе Использование SDK.

# Инструкция подключения

## Подключение GigaChat в свой проект
1. Получаем Access token
Чтобы иметь возможность отправлять авторизованные запросы к API
Запрос для получения: POST /api/v2/oauth
В запросе на получение токена доступа используется аутентификация по Basic-схеме, поэтому в заголовке Authorization нужно передать полученный Authorization key
python```
import requests

url = "https://ngw.devices.sberbank.ru:9443/api/v2/oauth"

payload={
  'scope': 'GIGACHAT_API_PERS'
}
headers = {
  'Content-Type': 'application/x-www-form-urlencoded',
  'Accept': 'application/json',
  'RqUID': '9fb76fa0-6fe9-4fe1-b984-271803580ec4',
  'Authorization': 'Basic <Authorization key>'
}

response = requests.request("POST", url, headers=headers, data=payload)

print(response.text)
```
2. Отправляем запрос и получаем ответ
Попробуйте отправить свой первый запрос к GigaChat API на получение списка моделей, чтобы проверить работоспособность сервиса
Адрес для запросов к GigaChat API: https://gigachat.devices.sberbank.ru/
Для авторизации каждого запроса, в заголовке Authorization нужно передавать актуальный Access token
Пример запроса
python```
import requests

url = "https://gigachat.devices.sberbank.ru/api/v1/models"

payload={}
headers = {
  'Accept': 'application/json',
  'Authorization': 'Bearer <Access token>'
}

response = requests.request("GET", url, headers=headers, data=payload)

print(response.text)
```
В ответе на запрос будет ваш Access token.
Используйте его для авторизации запросов к API

## Инструкция (начало работы с API)

В этом разделе вы узнаете как получить токен доступа и начать использовать GigaChat API.

Получение ключа авторизации
Перед началом работы нужно сгенерировать ключ авторизации в проекте GigaChat API.

Подробнее об Authorization key


Для этого:

Откройте проект GigaChat API в личном кабинете Studio.

В левой панели выберите раздел Настройки API.

Нажмите кнопку Получить ключ.

Ключ авторизации могут получить только пользователи с ролями Владелец и Администратор — для остальных ролей кнопка Получить ключ будет неактивна.

Подробнее о ролях и их возможностях — в разделе Создание команды и управление доступами.

В открывшемся окне скопируйте и сохраните значение поля Authorization Key. Ключ авторизации, отображается только один раз и не хранится в личном кабинете. При компрометации или утере ключа авторизации вы можете сгенерировать его повторно.

В разделе Настройка API вы также можете сохранить Client ID и Client Secret, чтобы создать ключ авторизации самостоятельно.

### Получение токена доступа
Токен доступа Access token нужен для авторизации запросов к GigaChat API по Bearer-схеме. Токен получается в обмен на ключ авторизации с помощью запроса POST /api/v2/oauth. Токен действителен в течение 30 минут.

Пример запроса для получения токена доступа:
Для получения токена вы также можете использовать Python SDK.
python```
from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
)

response = giga.get_token()

print(response)

Пример ответа:

{
  "access_token": "<токен_доступа>",
  "expires_at": 1706026848841
}
```
В справочной документации вы найдете подробное описание параметров запроса и ответа.

Также с помощью консоли вы сможете сгенерировать Access token.
Используйте полученный токен доступа для авторизации запросов к GigaChat API.

### Запросы к GigaChat API
Запросы к GigaChat API передаются по адресу https://gigachat.devices.sberbank.ru/ и авторизуются с помощью токена доступа Access token, который передан в заголовке Authorization.
Подробное описание всех запросов к API — в справочной документации.

Ниже в примерах работы с API в Python и TypeScript/JavaScript используются соответствующие SDK.

При работе с SDK запросы по умолчанию передаются в версию GigaChat API для физических лиц. О том как передавать запросы в версию API для юридических лиц — в разделе Использование SDK.

Пример запроса на получение списка моделей:
python```
from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
)

response = giga.get_models()

print(response)
```
Запрос возвращает список моделей GigaChat:

{
    "object": "list",
    "data": [
        {
            "id": "GigaChat",
            "object": "model",
            "owned_by": "salutedevices"
        },
        {
            "id": "GigaChat-Pro",
            "object": "model",
            "owned_by": "salutedevices"
        },
    ]
}

Модели GigaChat обладают разными возможностями и тарифицируются по-разному.

Генерация текста и изображений
За генерацию текста и изображений отвечает запрос POST /chat/completions. С помощью запросов на генерацию вы можете решать самые разные задачи: переводить, исправлять и стилизовать текст, генерировать краткое содержание статей и выделять из них основные идеи, создавать изображения и многое другое.

Запросы на генерацию тратят токены.

Токен — единица тарификации. Токен может быть символом, несколькими символами, фрагментом слова или словом целиком. В среднем в одном токене 3—4 символа, включая пробелы, знаки препинания и специальные символы.

Токены расходуются как на запрос, так и на ответ модели. Вы можете заранее оценить количество токенов в запросе с помощью запроса POST /tokens/count. Разные модели считают токены по-разному. Количество оставшихся токенов отображается в личном кабинете проекта GigaChat API. Если вы используете API как юридическое лицо или ИП, в вашем личном кабинете также будет доступен мониторинг потребления токенов.

Пример запроса на генерацию текста:
python```
from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
)

response = giga.chat("Привет! Как дела?")

print(response.choices[0].message.content)
```


﻿ 
GigaChat API
﻿ 
Быстрый старт для физлиц
﻿ 
Начало работы с API
Начало работы с API
Обновлено 27 августа 2025

Скопировать страницу

В этом разделе вы узнаете как получить токен доступа и начать использовать GigaChat API.

Получение ключа авторизации﻿
Перед началом работы нужно сгенерировать ключ авторизации в проекте GigaChat API.

Подробнее об Authorization key


Для этого:

Откройте проект GigaChat API в личном кабинете Studio.

В левой панели выберите раздел Настройки API.

Нажмите кнопку Получить ключ.

Ключ авторизации могут получить только пользователи с ролями Владелец и Администратор — для остальных ролей кнопка Получить ключ будет неактивна.

Подробнее о ролях и их возможностях — в разделе Создание команды и управление доступами.

В открывшемся окне скопируйте и сохраните значение поля Authorization Key. Ключ авторизации, отображается только один раз и не хранится в личном кабинете. При компрометации или утере ключа авторизации вы можете сгенерировать его повторно.

В разделе Настройка API вы также можете сохранить Client ID и Client Secret, чтобы создать ключ авторизации самостоятельно.

Получение токена доступа﻿
Токен доступа Access token нужен для авторизации запросов к GigaChat API по Bearer-схеме. Токен получается в обмен на ключ авторизации с помощью запроса POST /api/v2/oauth. Токен действителен в течение 30 минут.

Пример запроса для получения токена доступа:

Для получения токена вы также можете использовать Python SDK.

from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
)

response = giga.get_token()

print(response)

Пример ответа:

{
  "access_token": "<токен_доступа>",
  "expires_at": 1706026848841
}

В справочной документации вы найдете подробное описание параметров запроса и ответа.

Также с помощью консоли вы сможете сгенерировать Access token.

Используйте полученный токен доступа для авторизации запросов к GigaChat API.

Запросы к GigaChat API﻿
Запросы к GigaChat API передаются по адресу https://gigachat.devices.sberbank.ru/ и авторизуются с помощью токена доступа Access token, который передан в заголовке Authorization.

Вы также можете передавать запросы к моделям в раннем доступе. Их возможности могут отличаться от моделей, доступных в промышленном контуре.

Для обращения к моделям в раннем доступе передавайте запросы по адресу https://gigachat.devices.sberbank.ru/.

Подробное описание всех запросов к API — в справочной документации.

Ниже в примерах работы с API в Python и TypeScript/JavaScript используются соответствующие SDK.

При работе с SDK запросы по умолчанию передаются в версию GigaChat API для физических лиц. О том как передавать запросы в версию API для юридических лиц — в разделе Использование SDK.

Пример запроса на получение списка моделей:

from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
)

response = giga.get_models()

print(response)

Запрос возвращает список моделей GigaChat:

{
    "object": "list",
    "data": [
        {
            "id": "GigaChat",
            "object": "model",
            "owned_by": "salutedevices"
        },
        {
            "id": "GigaChat-Pro",
            "object": "model",
            "owned_by": "salutedevices"
        },
    ]
}

Модели GigaChat обладают разными возможностями и тарифицируются по-разному.

### Генерация текста и изображений
За генерацию текста и изображений отвечает запрос POST /chat/completions. С помощью запросов на генерацию вы можете решать самые разные задачи: переводить, исправлять и стилизовать текст, генерировать краткое содержание статей и выделять из них основные идеи, создавать изображения и многое другое.

Запросы на генерацию тратят токены.

Токен — единица тарификации. Токен может быть символом, несколькими символами, фрагментом слова или словом целиком. В среднем в одном токене 3—4 символа, включая пробелы, знаки препинания и специальные символы.

Токены расходуются как на запрос, так и на ответ модели. Вы можете заранее оценить количество токенов в запросе с помощью запроса POST /tokens/count. Разные модели считают токены по-разному. Количество оставшихся токенов отображается в личном кабинете проекта GigaChat API. Если вы используете API как юридическое лицо или ИП, в вашем личном кабинете также будет доступен мониторинг потребления токенов.

Пример запроса на генерацию текста:
python```
from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
)

response = giga.chat("Привет! Как дела?")

print(response.choices[0].message.content)
```
Пример ответа:

{
  "choices": [
    {
      "finish_reason": "stop",
      "index": 0,
      "message": {
        "content": "Все отлично, спасибо. А как ваши дела?",
        "role": "assistant"
      }
    }
  ],
  "created": 1706096547,
  "model": "GigaChat",
  "object": "chat.completion",
  "usage": {
    "completion_tokens": 12,
    "prompt_tokens": 173,
    "system_tokens": 0,
    "total_tokens": 185
  }
}

Если вы хотите получить наиболее сбалансированный ответ, не передавайте параметры temperature и top_p. В таком случае модель применит значения по умолчанию.

Подробное описание параметров — в справке API.

### Создание эмбеддинга
Для создания эмбеддингов используется запрос POST /embeddings. Эмбеддинги нужны для определения смыслового сходства текстов, что позволяет решать задачи вроде поиска, извлечения данных из текстов и других.

При создании эмбеддинга расходуются токены, также как и при генерации контента. Запросы на создание эмбеддингов передаются в модель Embeddings.

Подробнее о создании эмбеддингов читайте в разделе Векторное представление текста.

Пример запроса:
python```
from gigachat import GigaChat

giga = GigaChat(
   credentials="ключ_авторизации",
)

response = giga.embeddings(["Текст"])

print(response)
```
# GigaChain

GigaChat — это Python-библиотека для работы с REST API GigaChat. Она является частью GigaChain и входит в состав langchain-gigachat — партнерского пакета opensource-фреймворка LangChain﻿ .

Библиотека управляет авторизацией запросов и предоставляет все необходимые методы для работы с API. Кроме этого она поддерживает:

обработку потоковой передачи токенов;
работу с функциями;
создание эмбеддингов;
работу в синхронном или в асинхронном режиме.
Установка﻿
Для установки библиотеки используйте менеджер пакетов pip:

pip install gigachat

Быстрый старт﻿
Для работы с библиотекой вам понадобится ключ авторизации API.

Чтобы получить ключ авторизации:

Создайте проект GigaChat API в личном кабинете Studio.
В интерфейсе проекта, в левой панели выберите раздел Настройки API.
Нажмите кнопку Получить ключ.
В открывшемся окне скопируйте и сохраните значение поля Authorization Key. Ключ авторизации, отображается только один раз и не хранятся в личном кабинете. При компрометации или утере ключа авторизации вы можете сгенерировать его повторно.

Подробно о том, как создать проект GigaChat API — в официальной документации, в разделах Быстрый старт для физических лиц и Быстрый старт для ИП и юридических лиц.

Передайте полученный ключ авторизации в параметре credentials при инициализации объекта GigaChat.

Пример показывает как отправить простой запрос на генерацию с помощью библиотеки GigaChat:

from gigachat import GigaChat

# Укажите ключ авторизации, полученный в личном кабинете, в интерфейсе проекта GigaChat API
with GigaChat(credentials="ваш_ключ_авторизации", verify_ssl_certs=False) as giga:
    response = giga.chat("Какие факторы влияют на стоимость страховки на дом?")
    print(response.choices[0].message.content)

Параметры объекта GigaChat
В таблице описаны параметры, которые можно передать при инициализации объекта GigaChat:

|Параметр|	|Обязательный|	|Описание|
|credentials|	|да|	|Ключ авторизации для обмена сообщениями с GigaChat API.
Ключ авторизации содержит информацию о версии API, к которой выполняются запросы. Если вы используете версию API для ИП или юрлиц, укажите это явно в параметре scope|
|verify_ssl_certs|	|нет|	|Отключение проверки ssl-сертификатов. Для обращения к GigaChat API нужно установить корневой сертификат НУЦ Минцифры. Используйте параметр ответственно, так как отключение проверки сертификатов снижает безопасность обмена данными|
|scope|	|нет|	|Версия API, к которой будет выполнен запрос. По умолчанию запросы передаются в версию для физических лиц. Возможные значения:
GIGACHAT_API_PERS — версия API для физических лиц;
GIGACHAT_API_B2B — версия API для ИП и юрлиц при работе по предоплате.
GIGACHAT_API_CORP — версия API для ИП и юрлиц при работе по постоплате.
model	нет	необязательный параметр, в котором можно явно задать модель GigaChat. Вы можете посмотреть список доступных моделей с помощью метода get_models(), который выполняет запрос GET /models.

Стоимость запросов к разным моделям отличается. Подробную информацию о тарификации запросов к той или иной модели вы ищите в официальной документации|
|base_url|	|нет|	|Адрес API. По умолчанию запросы отправляются по адресу https://gigachat.devices.sberbank.ru/api/v1/, но если вы хотите использовать модели в раннем доступе, укажите адрес https://gigachat-preview.devices.sberbank.ru/api/v1|
Чтобы не указывать параметры при каждой инициализации, задайте их в переменных окружения.

Способы авторизации
Для авторизации запросов, кроме ключа, полученного в личном кабинете, вы можете использовать:

имя пользователя и пароль для доступа к сервису;
сертификаты TLS;
токен доступа (access token), полученный в обмен на ключ авторизации в запросе POST /api/v2/oauth.
Для этого передайте соответствующие параметры при инициализации.

Пример авторизации с помощью логина и пароля:

giga = GigaChat(
    base_url="https://gigachat.devices.sberbank.ru/api/v1",
    user="имя_пользоваеля",
    password="пароль",
)

Авторизация с помощью сертификатов по протоколу TLS (mTLS):

giga = GigaChat(
    base_url="https://gigachat.devices.sberbank.ru/api/v1",
    ca_bundle_file="certs/ca.pem",  # chain_pem.txt
    cert_file="certs/tls.pem",  # published_pem.txt
    key_file="certs/tls.key",
    key_file_password="123456",
    ssl_context=context # optional ssl.SSLContext instance
)

Авторизация с помощью токена доступа:

giga = GigaChat(
    access_token="ваш_токен_доступа",
)

Токен действителен в течение 30 минут.

Предварительная авторизация﻿
По умолчанию, библиотека GigaChat получает токен доступа при первом запросе к API.

Если вам нужно получить токен и авторизоваться до выполнения запроса, инициализируйте объект GigaChat и вызовите метод get_token().

giga = GigaChat(
    base_url="https://gigachat.devices.sberbank.ru/api/v1",
    user="имя_пользователя",
    password="пароль",
)
giga.get_token()

Настройка переменных окружения﻿
Чтобы задать параметры с помощью переменных окружения, в названии переменной используйте префикс GIGACHAT_.

Пример переменных окружения, которые задают ключ авторизации, версию API и отключают проверку сертификатов.

export GIGACHAT_CREDENTIALS=...
export GIGACHAT_SCOPE=...
export GIGACHAT_VERIFY_SSL_CERTS=False

Пример переменных окружения, которые задают адрес API, имя пользователя и пароль.

export GIGACHAT_BASE_URL=https://gigachat.devices.sberbank.ru/api/v1
export GIGACHAT_USER=...
export GIGACHAT_PASSWORD=...

# Общая документация

## Получение токена доступа и авторизация запросов

Запросы к GigaChat API передаются по адресу https://gigachat.devices.sberbank.ru/ и авторизуются с помощью токена доступа по протоколу OAuth 2.0﻿ . Токен доступа передается в заголовке Authorization:

curl -L -X GET 'https://gigachat.devices.sberbank.ru/api/v1/models' \
-H 'Accept: application/json' \
-H 'Authorization: Bearer <токен_доступа>'

Вы также можете передавать запросы к моделям в раннем доступе. Их возможности могут отличаться от моделей, доступных в промышленном контуре.

Чтобы получить токен, отправьте запрос POST /api/v2/oauth:

curl -L -X POST 'https://ngw.devices.sberbank.ru:9443/api/v2/oauth' \
-H 'Content-Type: application/x-www-form-urlencoded' \
-H 'Accept: application/json' \
-H 'RqUID: <идентификатор_запроса>' \
-H 'Authorization: Basic ключ_авторизации' \
--data-urlencode 'scope=GIGACHAT_API_PERS'

Где:

RqUID — обязательный заголовок, в котором нужно передать уникальный идентификатор запроса в формате uuid4. Идентификатор нужно указать самостоятельно, для этого можно использовать стандартные библиотеки и классы для генерации UUID и GUID.
Authorization — обязательный заголовок, в котором нужно передать ключ авторизации.
scope — обязательное поле в теле запроса, которое указывает к какой версии API выполняется запрос. Возможные значения:
GIGACHAT_API_PERS — доступ для физических лиц.
GIGACHAT_API_B2B — доступ для ИП и юридических лиц по платным пакетам.
GIGACHAT_API_CORP — доступ для ИП и юридических лиц по схеме pay-as-you-go.
При успешном выполнении запроса GigaChat API вернет токен доступа, который действует в течение 30 минут:

{
  "access_token": "<токен_доступа>",
  "expires_at": 1679471442
}


Запросы на получение токена можно отправлять до 10 раз в секунду.

Как получить ключ авторизации и токен доступа Access token читайте в разделах Быстрый старт для физических лиц и Быстрый старт для ИП и юридических лиц.

## Сгенерировать ответ

POST
https://gigachat.devices.sberbank.ru/api/v1/chat/completions

Авторизация: http
Возвращает ответ модели, сгенерированный на основе переданных сообщений.

Передавайте текст сообщений (поле content) в кодировке UTF8. Это позволит снизить расход токенов при обработке сообщения.

При генерации ответа модель может учитывать текстовые документы, изображения и аудиофайлы, сохраненные в хранилище. Для этого передайте список идентификаторов файлов в массиве attachments. При использовании больших текстовых файлов в запросах на генерацию, их содержимое может превышать размер контекста модели. В таком случае вернется ошибка с кодом 422.

В одном сообщении (объект в массиве messages) можно передать только одно изображение. В одном запросе можно передать до 10 изображений, независимо от количества сообщений.

При этом общий размер запроса при работе с изображениями и аудио должен быть меньше 80 Мб.

Например, ваш запрос может включать текст промпта и идентификаторы изображения размером 12 Мб, и двух аудиофайлов размером 33 Мб и 21 Мб. Что в сумме даст запрос размером больше 66 Мб, в зависимости от размера промпта.

Размер текстовых документов не влияет на размер запроса, но их содержимое может превышать контекстное окно модели.

Подробнее — в разделе Обработка файлов.

Запрос на генерацию можно передавать моделям в раннем доступе. К названию модели, которое передается в поле model, добавьте постфикс -preview.

Запрос
Header Parameters
X-Client-ID
string
Произвольный идентификатор пользователя, который используется для логирования.

Если вы передали этот заголовок при запросе на создание изображения, то для скачивания изображения в запросе нужно передать этот же заголовок.

X-Request-ID
string
Произвольный идентификатор запроса, который используется для логирования.

X-Session-ID
string
Произвольный идентификатор сессии, который используется для логирования.

Body
application/json
model
string
required
Название и версия модели, которая сгенерировала ответ. Описание доступных моделей смотрите в разделе Модели GigaChat.

При обращении к моделям в раннем доступе к названию модели нужно добавлять постфикс -preview. Например, GigaChat-Pro-preview.

messages
object[]
required
function_call
object
functions
object[]
nullable
temperature
float
nullable
Температура выборки. Чем выше значение, тем более случайным будет ответ модели. Если значение температуры находится в диапазоне от 0 до 0.001, параметры temperature и top_p будут сброшены в режим, обеспечивающий максимально детерминированный (стабильный) ответ модели. При значениях температуры больше двух, набор токенов в ответе модели может отличаться избыточной случайностью.

Значение по умолчанию зависит от выбранной модели (поле model) и может изменяться с обновлениями модели.

top_p
float
nullable
Возможные значения: >= 0 и <= 1

Параметр используется как альтернатива температуре (поле temperature). Задает вероятностную массу токенов, которые должна учитывать модель. Так, если передать значение 0.1, модель будет учитывать только токены, чья вероятностная масса входит в верхние 10%.

Значение по умолчанию зависит от выбранной модели (поле model) и может изменяться с обновлениями модели.

Значение изменяется в диапазоне от 0 до 1 включительно.

stream
boolean
По умолчанию: false

Указывает что сообщения надо передавать по частям в потоке.

Сообщения передаются по протоколу SSE﻿ .

Поток завершается событием data: [DONE].

Подробнее читайте в разделе Потоковая генерация токенов.

max_tokens
int32
nullable
Максимальное количество токенов, которые будут использованы для создания ответов.

repetition_penalty
float
nullable
Количество повторений слов:

Значение 1.0 — нейтральное значение.
При значении больше 1 модель будет стараться не повторять слова.
Значение по умолчанию зависит от выбранной модели (поле model) и может изменяться с обновлениями модели.

update_interval
number
По умолчанию: 0

Параметр потокового режима ("stream": "true"). Задает минимальный интервал в секундах, который проходит между отправкой токенов. Например, если указать 1, сообщения будут приходить каждую секунду, но размер каждого из них будет больше, так как за секунду накапливается много токенов.

Ответы﻿
Успешное выполнение запроса. При запуске потоковой генерации передается с заголовком Content-Type:	text/event-stream.

Schema
choices
object[]
created
unix timestamp
Дата и время создания ответа в формате unix timestamp.

model
string
Название и версия модели, которая сгенерировала ответ. Описание доступных моделей смотрите в разделе Модели GigaChat.

При обращении к моделям в раннем доступе к названию модели нужно добавлять постфикс -preview. Например, GigaChat-Pro-preview.

usage
object
object
string
Название вызываемого метода.


# создание изображений

GigaChat API вернет изображение, если в запросе на генерацию POST /chat/completions получит соответствующее сообщение, например: «Нарисуй розового кота». Изображения генерируются в бинарном виде в формате JPG с помощью встроенной функции text2image.

В ответ GigaChat возвращает идентификатор созданного изображения, которое можно скачать с помощью запроса POST /files/{file_id}/content.

Для создания изображения в запросе нужно передать параметр "function_call": "auto", с помощью которого модель определяет необходимость вызова функции text2image. При создании изображений с помощью встроенной функции модель возвращает ответ с результатом "finish_reason": "stop".

Вы можете стилизовать изображения с помощью системного промпта.

python```
from gigachat import GigaChat
from gigachat.models import Chat, Messages, MessagesRole

giga = GigaChat(
    credentials="ключ_авторизации",
)

payload = Chat(
    messages=[
        Messages(
            role=MessagesRole.SYSTEM,
            content="Ты — Василий Кандинский"
        ),
        Messages(
            role=MessagesRole.USER,
            content="Нарисуй розового кота"
            )
        ],
    function_call="auto",
)

response = giga.chat(payload)

print(response.choices[0].message.content)
```
Пример ответа:

<img src="27055233-d11d-4bab-af8e-8ce1b6b33bb0" fuse="true"/>

Скачивание изображения﻿
Ответ модели будет содержать идентификатор получившегося изображения в формате uuid4. Идентификатор передается в поле message.content, в теге <img>, в атрибуте src:

{
    "message": {
        "content": "<img src=\"a598ae3d-d3eb-454e-a8bf-0848193a603e\" fuse=\"true\"/>",
        "role": "assistant"
    },
    "index": 0,
    "finish_reason": "stop"
}

Для скачивания изображения передайте полученный идентификатор в запросе GET /files/{file_id}/content:

python```
import base64

from gigachat import GigaChat
from gigachat.models import Image, Chat, Messages, MessagesRole

from bs4 import BeautifulSoup

giga = GigaChat(
    credentials="ключ_авторизации",
)

payload = Chat(
    messages=[
        Messages(
            role=MessagesRole.SYSTEM,
            content="Ты — Василий Кандинский"
        ),
        Messages(
            role=MessagesRole.USER,
            content="Нарисуй розового кота"
            )
        ],
    function_call="auto",
)

response = giga.chat(payload).choices[0].message.content

# Получение идентификатора изоборажения из ответа модели
# с помощью библиотеки BeautifulSoup
file_id = BeautifulSoup(response, "html.parser").find('img').get("src")

image = giga.get_image(file_id)

# Сохранение изображения в файл
with open('image.jpg', mode="wb") as fd:
    fd.write(base64.b64decode(image.content))
```

Ответ на запрос будет содержать бинарное представление файла в формате JPG.
