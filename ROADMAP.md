# ROADMAP (команда 5 человек, хакатон → MVP → развитие)

Ниже — последовательный план работ, чтобы за хакатон получить демонстрируемый **MVP конвейера**, а затем эволюционировать в «боевое» решение.

## Роли (условно 5 участников)

1. **Backend/DB инженер** — API, модели данных, миграции, бизнес-логика статусов.
2. **AI/Agent инженер** — оркестратор, шаблоны/тон, провайдеры LLM, guardrails, идемпотентность генерации.
3. **Web/UX инженер** — веб-интерфейс, сценарии ручного управления, таблицы/фильтры/статусы.
4. **Data/Enrichment инженер** — календарь праздников, справочники, обогащение по ИНН (ОКВЭД/руководитель), кэш.
5. **DevOps/QA инженер** — локальный запуск, CI, тесты, наблюдаемость, документация, контроль качества.

## Этап 0 — выравнивание (0.5 дня)

- **Общее**
  - Согласовать цели демо: какие сценарии покажем (ДР, праздник, ручной триггер, доставка).
  - Определить минимальный набор полей «CRM» для персонализации.
  - Зафиксировать «канал доставки» для MVP (файловый outbox) и формат.

**Выход**: согласованный сценарий демо + список сущностей/полей.

## Этап 1 — Каркас MVP (день 1)

- **Backend/DB**
  - Поднять FastAPI, SQLite, модели: Client/Event/Greeting/Delivery/Holiday/Feedback.
  - Реализовать CRUD клиентов и список событий/поздравлений.
- **Web/UX**
  - Дашборд + страницы: Clients, Events, Greetings/Deliveries, Settings (Holidays).
  - Кнопки: seed demo data, run agent now, manual trigger.
- **DevOps/QA**
  - Скрипты запуска на Windows, `env.example`, базовая структура тестов.

**Выход**: UI показывает данные, всё запускается локально.

## Этап 2 — Конвейер агента (день 2)

- **AI/Agent**
  - Детектор событий на \(N\) дней вперёд (ДР + праздники из справочника).
  - Выбор тона/шаблона по сегменту и типу события.
  - Генерация текста: LLM-провайдер (опционально) + «безключевой» rule-based fallback.
  - Генерация «открытки»: простой рендер (Pillow) в файл.
  - Логи и статусы, идемпотентность на повторных запусках.
- **Backend/DB**
  - Эндпоинт «run agent once», «trigger manual event», фиксация Delivery.
- **Web/UX**
  - Отображение прогресса: статусы, фильтры «к отправке/отправлено/ошибка».

**Выход**: кнопка «Run agent now» создаёт поздравления и «отправляет» их в outbox.

## Этап 3 — Обогащение данных (день 3, если успеваем)

- **Data/Enrichment**
  - Справочник профессиональных праздников (источник + формат + обновление).
  - MVP-обогащение по ИНН: получить ОКВЭД/руководителя (через публичные источники/скрапинг/заглушки).
  - Кэширование и ограничения частоты запросов.
- **AI/Agent**
  - Использовать ОКВЭД/отрасль для более точных пожеланий.

**Выход**: персонализация учитывает отрасль и название компании.

## Этап 4 — Надёжность и качество (параллельно, непрерывно)

- **DevOps/QA**
  - Тесты: детектор событий, идемпотентная отправка, базовые API.
  - Статические проверки: форматирование/линт (ruff/black), типы (mypy) — по возможности.
  - Наблюдаемость: структурные логи, трассировка ошибок, отчёт по запуску агента.
- **Backend/AI**
  - Ретраи сетевых вызовов, таймауты, ограничение параллелизма.
  - Guardrails текста: запрет персональных данных сверх разрешённых, анти-«галлюцинации».

## Этап 5 — Пост-MVP развитие (после хакатона)

- **Каналы доставки**
  - SMTP/Exchange, SMS, WhatsApp/Telegram (через корпоративные шлюзы), контроль согласий.
- **Интеграция с CRM**
  - Read-only выгрузка, CDC/ETL, аудит изменений, роли/ACL.
- **Обучение на результате**
  - Метрики: открываемость, ответы, NPS/оценка менеджера.
  - A/B тесты шаблонов, обучение ранжирования/политики выбора тона.
- **Комплаенс/безопасность**
  - Политики хранения данных, маскирование, журналирование доступа, DLP.


